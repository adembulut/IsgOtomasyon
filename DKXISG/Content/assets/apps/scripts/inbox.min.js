var AppInbox=function(){var t=$(".inbox-content"),i="",r=function(r,u){var f=r.attr("data-title");i=u;App.blockUI({target:t,overlayColor:"none",animate:!0});n(r);$.ajax({type:"GET",cache:!1,url:"app_inbox_inbox.html",dataType:"html",success:function(i){n(r);App.unblockUI(".inbox-content");$(".inbox-nav > li.active").removeClass("active");r.closest("li").addClass("active");$(".inbox-header > h1").text(f);t.html(i);Layout.fixContentHeight&&Layout.fixContentHeight()},error:function(){n(r)},async:!1});jQuery("body").on("change",".mail-group-checkbox",function(){var n=jQuery(".mail-checkbox"),t=jQuery(this).is(":checked");jQuery(n).each(function(){$(this).attr("checked",t)})})},u=function(i,r,u){var f;App.blockUI({target:t,overlayColor:"none",animate:!0});n(i);f=i.parent("tr").attr("data-messageid");$.ajax({type:"GET",cache:!1,url:"app_inbox_view.html",dataType:"html",data:{message_id:f},success:function(r){App.unblockUI(t);n(i);u&&$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("View Message");t.html(r);Layout.fixContentHeight()},error:function(){n(i)},async:!1})},f=function(){$(".inbox-wysihtml5").wysihtml5({stylesheets:["../assets/global/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})},e=function(){$("#fileupload").fileupload({url:"../assets/global/plugins/jquery-file-upload/server/php/",autoUpload:!0});$.support.cors&&$.ajax({url:"../assets/global/plugins/jquery-file-upload/server/php/",type:"HEAD"}).fail(function(){$('<span class="alert alert-error"/>').text("Upload server currently unavailable - "+new Date).appendTo("#fileupload")})},o=function(i){App.blockUI({target:t,overlayColor:"none",animate:!0});n(i);$.ajax({type:"GET",cache:!1,url:"app_inbox_compose.html",dataType:"html",success:function(r){App.unblockUI(t);n(i);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Compose");t.html(r);e();f();$(".inbox-wysihtml5").focus();Layout.fixContentHeight()},error:function(){n(i)},async:!1})},h=function(i){var r=$(i).attr("data-messageid");App.blockUI({target:t,overlayColor:"none",animate:!0});n(i);$.ajax({type:"GET",cache:!1,url:"app_inbox_reply.html",dataType:"html",success:function(r){App.unblockUI(t);n(i);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Reply");t.html(r);$('[name="message"]').val($("#reply_email_content_body").html());s();e();f();Layout.fixContentHeight()},error:function(){n(i)},async:!1})},s=function(){var t=$(".inbox-compose .mail-to .inbox-cc"),n=$(".inbox-compose .input-cc");t.hide();n.show();$(".close",n).click(function(){n.hide();t.show()})},c=function(){var t=$(".inbox-compose .mail-to .inbox-bcc"),n=$(".inbox-compose .input-bcc");t.hide();n.show();$(".close",n).click(function(){n.hide();t.show()})},n=function(n){typeof n!="undefined"&&(n.attr("disabled")?n.attr("disabled",!1):n.attr("disabled",!0))};return{init:function(){$(".inbox").on("click",".compose-btn",function(){o($(this))});$(".inbox").on("click",".inbox-discard-btn",function(n){n.preventDefault();r($(this),i)});$(".inbox").on("click",".reply-btn",function(){h($(this))});$(".inbox").on("click",".view-message",function(){u($(this))});$(".inbox-nav > li > a").click(function(){r($(this),"inbox")});$(".inbox-content").on("click",".mail-to .inbox-cc",function(){s()});$(".inbox-content").on("click",".mail-to .inbox-bcc",function(){c()});App.getURLParameter("a")==="view"?u():App.getURLParameter("a")==="compose"?o():$(".inbox-nav > li:first > a").click()}}}();jQuery(document).ready(function(){AppInbox.init()});
//# sourceMappingURL=inbox.min.js.map
